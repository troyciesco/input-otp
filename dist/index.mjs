var kt=Object.defineProperty,Ot=Object.defineProperties;var Gt=Object.getOwnPropertyDescriptors;var J=Object.getOwnPropertySymbols;var Et=Object.prototype.hasOwnProperty,St=Object.prototype.propertyIsEnumerable;var wt=(c,r,e)=>r in c?kt(c,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):c[r]=e,bt=(c,r)=>{for(var e in r||(r={}))Et.call(r,e)&&wt(c,e,r[e]);if(J)for(var e of J(r))St.call(r,e)&&wt(c,e,r[e]);return c},Pt=(c,r)=>Ot(c,Gt(r));var ht=(c,r)=>{var e={};for(var l in c)Et.call(c,l)&&r.indexOf(l)<0&&(e[l]=c[l]);if(c!=null&&J)for(var l of J(c))r.indexOf(l)<0&&St.call(c,l)&&(e[l]=c[l]);return e};import*as n from"react";function _t(c){let r=setTimeout(c,0),e=setTimeout(c,10),l=setTimeout(c,50);return[r,e,l]}import*as Q from"react";function Tt(c){let r=Q.useRef();return Q.useEffect(()=>{r.current=c}),r.current}import*as w from"react";var xt=18,Dt=40,jt=`${Dt}px`,Lt=["[data-lastpass-icon-root]","com-1password-button","[data-dashlanecreated]",'[style$="2147483647 !important;"]'].join(",");function It({containerRef:c,inputRef:r,pushPasswordManagerStrategy:e,isFocused:l}){let[b,A]=w.useState(!1),[N,k]=w.useState(!1),[U,O]=w.useState(!1),tt=w.useMemo(()=>e==="none"?!1:(e==="increase-width"||e==="experimental-no-flickering")&&b&&N,[b,N,e]),M=w.useCallback(()=>{let d=c.current,E=r.current;if(!d||!E||U||e==="none")return;let s=E.ownerDocument||document,S=d,C=S.getBoundingClientRect().left+S.offsetWidth,h=S.getBoundingClientRect().top+S.offsetHeight/2,G=C-xt,$=h;s.querySelectorAll(Lt).length===0&&s.elementFromPoint(G,$)===d||(A(!0),O(!0))},[c,r,U,e]);return w.useEffect(()=>{let d=c.current,E=r.current;if(!d||!E||e==="none")return;let S=(E.ownerDocument||document).defaultView||window;function C(){let $=S.innerWidth-d.getBoundingClientRect().right;k($>=Dt)}C();let h=setInterval(C,1e3);return()=>{clearInterval(h)}},[c,r,e]),w.useEffect(()=>{let d=r.current,E=(d==null?void 0:d.ownerDocument)||document,s=l||E.activeElement===d;if(e==="none"||!s)return;let S=setTimeout(M,0),C=setTimeout(M,2e3),h=setTimeout(M,5e3),G=setTimeout(()=>{O(!0)},6e3);return()=>{clearTimeout(S),clearTimeout(C),clearTimeout(h),clearTimeout(G)}},[r,l,e,M]),{hasPWMBadge:b,willPushPWMBadge:tt,PWM_BADGE_SPACE_WIDTH:jt}}var Nt=n.createContext({}),$t=n.forwardRef((C,S)=>{var h=C,{value:c,onChange:r,maxLength:e,textAlign:l="left",pattern:b,placeholder:A,inputMode:N="numeric",onComplete:k,pushPasswordManagerStrategy:U="increase-width",pasteTransformer:O,containerClassName:tt,noScriptCSSFallback:M=Ft,render:d,children:E}=h,s=ht(h,["value","onChange","maxLength","textAlign","pattern","placeholder","inputMode","onComplete","pushPasswordManagerStrategy","pasteTransformer","containerClassName","noScriptCSSFallback","render","children"]);var q,ft,mt,pt,Rt;let[G,$]=n.useState(typeof s.defaultValue=="string"?s.defaultValue:""),a=c!=null?c:G,_=Tt(a),F=n.useCallback(t=>{r==null||r(t),$(t)},[r]),R=n.useMemo(()=>b?typeof b=="string"?new RegExp(b):b:null,[b]),u=n.useRef(null),et=n.useRef(null),nt=n.useRef({value:a,onChange:F,isIOS:typeof window!="undefined"&&((ft=(q=window==null?void 0:window.CSS)==null?void 0:q.supports)==null?void 0:ft.call(q,"-webkit-touch-callout","none"))}),Z=n.useRef({prev:[(mt=u.current)==null?void 0:mt.selectionStart,(pt=u.current)==null?void 0:pt.selectionEnd,(Rt=u.current)==null?void 0:Rt.selectionDirection]});n.useImperativeHandle(S,()=>u.current,[]),n.useEffect(()=>{let t=u.current,o=et.current;if(!t||!o)return;let i=t.ownerDocument||document,v=i.defaultView||window;nt.current.value!==t.value&&nt.current.onChange(t.value),Z.current.prev=[t.selectionStart,t.selectionEnd,t.selectionDirection];function m(){if(i.activeElement!==t){z(null),X(null);return}let f=t.selectionStart,p=t.selectionEnd,K=t.selectionDirection,W=t.maxLength,H=t.value,P=Z.current.prev,T=-1,D=-1,I;if(H.length!==0&&f!==null&&p!==null){let Ht=f===p,Bt=f===H.length&&H.length<W;if(Ht&&!Bt){let B=f;if(B===0)T=0,D=1,I="forward";else if(B===W)T=B-1,D=B,I="backward";else if(W>1&&H.length>1){let ct=0;if(P[0]!==null&&P[1]!==null){I=B<P[1]?"backward":"forward";let At=P[0]===P[1]&&P[0]<W;I==="backward"&&!At&&(ct=-1)}T=ct+B,D=ct+B+1}}T!==-1&&D!==-1&&T!==D&&u.current.setSelectionRange(T,D,I)}let vt=T!==-1?T:f,gt=D!==-1?D:p,Wt=I!=null?I:K;z(vt),X(gt),Z.current.prev=[vt,gt,Wt]}if(i.addEventListener("selectionchange",m,{capture:!0}),m(),i.activeElement===t&&ot(!0),!i.getElementById("input-otp-style")){let f=i.createElement("style");if(f.id="input-otp-style",i.head.appendChild(f),f.sheet){let p="background: transparent !important; color: transparent !important; border-color: transparent !important; opacity: 0 !important; box-shadow: none !important; -webkit-box-shadow: none !important; -webkit-text-fill-color: transparent !important;";Y(f.sheet,"[data-input-otp]::selection { background: transparent !important; color: transparent !important; }"),Y(f.sheet,`[data-input-otp]:autofill { ${p} }`),Y(f.sheet,`[data-input-otp]:-webkit-autofill { ${p} }`),Y(f.sheet,"@supports (-webkit-touch-callout: none) { [data-input-otp] { letter-spacing: -.6em !important; font-weight: 100 !important; font-stretch: ultra-condensed; font-optical-sizing: none !important; left: -1px !important; right: 1px !important; } }"),Y(f.sheet,"[data-input-otp] + * { pointer-events: all !important; }")}}let g=()=>{o&&o.style.setProperty("--root-height",`${t.clientHeight}px`)};g();let L=new(v.ResizeObserver||ResizeObserver)(g);return L.observe(t),()=>{i.removeEventListener("selectionchange",m,{capture:!0}),L.disconnect()}},[]);let[st,at]=n.useState(!1),[V,ot]=n.useState(!1),[y,z]=n.useState(null),[x,X]=n.useState(null);n.useEffect(()=>{_t(()=>{var v,m,g,L;(v=u.current)==null||v.dispatchEvent(new Event("input"));let t=(m=u.current)==null?void 0:m.selectionStart,o=(g=u.current)==null?void 0:g.selectionEnd,i=(L=u.current)==null?void 0:L.selectionDirection;t!==null&&o!==null&&(z(t),X(o),Z.current.prev=[t,o,i])})},[a,V]),n.useEffect(()=>{_!==void 0&&a!==_&&_.length<e&&a.length===e&&(k==null||k(a))},[e,k,_,a]);let j=It({containerRef:et,inputRef:u,pushPasswordManagerStrategy:U,isFocused:V}),it=n.useCallback(t=>{let o=t.currentTarget.value.slice(0,e);if(o.length>0&&R&&!R.test(o)){t.preventDefault();return}typeof _=="string"&&o.length<_.length&&(t.currentTarget.ownerDocument||document).dispatchEvent(new Event("selectionchange")),F(o)},[e,F,_,R]),ut=n.useCallback(()=>{var t;if(u.current){let o=Math.min(u.current.value.length,e-1),i=u.current.value.length;(t=u.current)==null||t.setSelectionRange(o,i),z(o),X(i)}ot(!0)},[e]),lt=n.useCallback(t=>{var H,P;let o=u.current;if(!O&&(!nt.current.isIOS||!t.clipboardData||!o))return;let i=t.clipboardData.getData("text/plain"),v=O?O(i):i;t.preventDefault();let m=(H=u.current)==null?void 0:H.selectionStart,g=(P=u.current)==null?void 0:P.selectionEnd,p=(m!==g?a.slice(0,m)+v+a.slice(g):a.slice(0,m)+v+a.slice(m)).slice(0,e);if(p.length>0&&R&&!R.test(p))return;o.value=p,F(p);let K=Math.min(p.length,e-1),W=p.length;o.setSelectionRange(K,W),z(K),X(W)},[e,F,R,a]),Mt=n.useMemo(()=>({position:"relative",cursor:s.disabled?"default":"text",userSelect:"none",WebkitUserSelect:"none",pointerEvents:"none"}),[s.disabled]),dt=n.useMemo(()=>({position:"absolute",inset:0,width:j.willPushPWMBadge?`calc(100% + ${j.PWM_BADGE_SPACE_WIDTH})`:"100%",clipPath:j.willPushPWMBadge?`inset(0 ${j.PWM_BADGE_SPACE_WIDTH} 0 0)`:void 0,height:"100%",display:"flex",textAlign:l,opacity:"1",color:"transparent",pointerEvents:"all",background:"transparent",caretColor:"transparent",border:"0 solid transparent",outline:"0 solid transparent",boxShadow:"none",lineHeight:"1",letterSpacing:"-.5em",fontSize:"var(--root-height)",fontFamily:"monospace",fontVariantNumeric:"tabular-nums"}),[j.PWM_BADGE_SPACE_WIDTH,j.willPushPWMBadge,l]),Ct=n.useMemo(()=>n.createElement("input",Pt(bt({autoComplete:s.autoComplete||"one-time-code"},s),{"data-input-otp":!0,"data-input-otp-placeholder-shown":a.length===0||void 0,"data-input-otp-mss":y,"data-input-otp-mse":x,inputMode:N,pattern:R==null?void 0:R.source,"aria-placeholder":A,style:dt,maxLength:e,value:a,ref:u,onPaste:t=>{var o;lt(t),(o=s.onPaste)==null||o.call(s,t)},onChange:it,onMouseOver:t=>{var o;at(!0),(o=s.onMouseOver)==null||o.call(s,t)},onMouseLeave:t=>{var o;at(!1),(o=s.onMouseLeave)==null||o.call(s,t)},onFocus:t=>{var o;ut(),(o=s.onFocus)==null||o.call(s,t)},onBlur:t=>{var o;ot(!1),(o=s.onBlur)==null||o.call(s,t)}})),[it,ut,lt,N,dt,e,x,y,s,R==null?void 0:R.source,a]),rt=n.useMemo(()=>({slots:Array.from({length:e}).map((t,o)=>{var g;let i=V&&y!==null&&x!==null&&(y===x&&o===y||o>=y&&o<x),v=a[o]!==void 0?a[o]:null,m=a[0]!==void 0?null:(g=A==null?void 0:A[o])!=null?g:null;return{char:v,placeholderChar:m,isActive:i,hasFakeCaret:i&&v===null}}),isFocused:V,isHovering:!s.disabled&&st}),[V,st,e,x,y,s.disabled,a]),yt=n.useMemo(()=>d?d(rt):n.createElement(Nt.Provider,{value:rt},E),[E,rt,d]);return n.createElement(n.Fragment,null,M!==null&&n.createElement("noscript",null,n.createElement("style",null,M)),n.createElement("div",{ref:et,"data-input-otp-container":!0,style:Mt,className:tt},yt,n.createElement("div",{style:{position:"absolute",inset:0,pointerEvents:"none"}},Ct)))});$t.displayName="Input";function Y(c,r){try{c.insertRule(r)}catch(e){console.error("input-otp could not insert CSS rule:",r)}}var Ft=`
[data-input-otp] {
  --nojs-bg: white !important;
  --nojs-fg: black !important;

  background-color: var(--nojs-bg) !important;
  color: var(--nojs-fg) !important;
  caret-color: var(--nojs-fg) !important;
  letter-spacing: .25em !important;
  text-align: center !important;
  border: 1px solid var(--nojs-fg) !important;
  border-radius: 4px !important;
  width: 100% !important;
}
@media (prefers-color-scheme: dark) {
  [data-input-otp] {
    --nojs-bg: black !important;
    --nojs-fg: white !important;
  }
}`;var Qt="^\\d+$",te="^[a-zA-Z]+$",ee="^[a-zA-Z0-9]+$";export{$t as OTPInput,Nt as OTPInputContext,te as REGEXP_ONLY_CHARS,Qt as REGEXP_ONLY_DIGITS,ee as REGEXP_ONLY_DIGITS_AND_CHARS};
//# sourceMappingURL=index.mjs.map